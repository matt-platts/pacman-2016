<DOCTYPE html>
<!-- Pacman -->
<!-- By Matt Platts - mattplatts@gmail.com-->
<html>
<head>
	<title>Pac Man - Level 1</title>

	<link rel="stylesheet" type="text/css" href="css/maze.css" />
	<link rel="stylesheet" type="text/css" href="css/pacman.css" />
	<link rel="stylesheet" type="text/css" href="css/icon.css" />
	<style>
	body {
		overflow:hidden;
	}
	</style>

</head>

<body onKeyDown="kd(event)" onKeyUp="ku(event)">

<div id="score" align="center">
	<form>
	SCORE: <input type="text" class="scores" value="000" size="4" name="score" readonly> LIVES: <input type="text" class="scores" value="3" size="1" name="lives" readonly>  TIME: <input type="text" class="scores" value="10000" size="4" name="gametimer" readonly>
	</form>
</div>

<div id="maze"> 
<div id="mazeinner"></div>
</div>

<div id="pacman" name="pacman" class="sprite pacman" style="top:265px; left:305px;">
   <div id="pacman-top"></div>
   <div id="pacman-bottom"></div>
</div>

<div id='ghost0' class="sprite ghost" style="top:205px; left:275px;">
<img src="graphics/ghost_red.gif" name="gst0" alt="" border="0">
</div>

<div id='ghost1' class="sprite ghost" style="top:205px; left:335px;">
<img src="graphics/ghost_pink.gif" name="gst1" alt="" border="0">
</div>

<div id='ghost2' class="sprite ghost" style="top:205px; left:305px;">
<img src="graphics/ghost_blue.gif" name="gst2" alt="" border="0">
</div>

<div id="ghost3" class="sprite ghost" style="top:185px; left:305px;">
<img src="graphics/ghost_orange.gif" name="gst3" alt="" border="0">
</div>

<div id="fruit" class="sprite" style="position:absolute;top:265px; left:305px; visibility:hidden">
<img src="graphics/cherry.gif" name="berry" width=23 height=23>
</div>

<div id="start" class="notice" style="visibility:visible;">
	<span class="notice_top" id="levelIndicator">Level <script>document.write(sessionStorage.level)</script></span>
	<span class="notice_bottom">Get Ready...</span>
</div>

<div id="message" class="notice">
	<span class="notice_top">One Life Lost</span>
	<span class="notice_bottom">Get Ready..</span>
</div>

<div id="messageEnd" class="notice" style="z-index:9;">
	<span class="notice_top"><span style="position:relative; top:15px; display:inline-block">Final Life Lost - <font color='orange'>Game Over</font></span></span><br />
	<span id="score" class="notice_bottom"></span>
</div>

<!-- Include javascript libraries //-->
<script language="JavaScript">
<!-- 

var levelOptions; // this is an optional object of options found in the js for each maze, allowing to specify optional override variables including where pacman and the ghosts start off

/* Generic function to load a script and execute a callback when complete */
function loadScript(url, callback){
    var head = document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;

    // Then bind the event to the callback function.
    // There are several events for cross browser compatibility.
    script.onreadystatechange = callback;
    script.onload = callback;

    // Fire the loading
    head.appendChild(script);
}

/* Sequence of events to load and start the game:
   1. At the bottom of this file, the loadScript function is called directly as part of this page, with the data for the first level passed in, and the callback function loadLevelOptions.
   2. loadLevelOptions will load any extra options for the level which were in the file of data for the first maze, then loads the script for maze.js (renders maze from the data), and the callback is loadMainScript.
   3. loadMainScript loads pacman.js which is the game code. The callback startLevel is then called.
   4. startLevel calls init() from the main script to set up the level, which returns the sprites var, and finally the game starts with the call to startGame(sprites)
*/

/* Callback 1 : loadLevelOptions */
var loadLevelOptions = function (){
	if (levelOptions){
		if (levelOptions.pacStartTop){
			pacStartTop = levelOptions.pacStartTop;
		}
	}
	loadScript("js/maze.js",loadMainScript);
}

/* Callback 2 : loadMainScript */
var loadMainScript = function(){
	mazedata=renderGrid();
	loadScript("js/pacman.js",startLevel);
}

/* Callback 3 : startLevel */
var startLevel = function(){
	sprites = init(); // calls init function in the game logic script pacman.js
	startGame(sprites); - for oo version only
}

/* ************* Main starts here **************** */
mazeDataFile = "js/data/mazedata" + sessionStorage.level + ".js";
loadScript(mazeDataFile,loadLevelOptions);

//-->
</script>
<script language="javascript" type="text/javascript" src="js/fx.js"></script>
</body>
</html>
